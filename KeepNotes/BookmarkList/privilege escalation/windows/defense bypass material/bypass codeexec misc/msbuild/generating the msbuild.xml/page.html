<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Generating the msbuild.xml</title>
</head><body>The easiest way to build the xml template with NPS_Payload on github: <a href="https://github.com/trustedsec/nps_payload">https://github.com/trustedsec/nps_payload</a>; however, it uses msvenom to generate payloads (ie, antivirus will pick it up). <br/>
A fork by Franci has the ability to generate C# payloads: <a href="https://github.com/fsacer/nps_payload">https://github.com/fsacer/nps_payload</a>&nbsp;and does NOT use powershell at all<br/>
<br/>
You can build the xml file with nps payload and replace it with code from any other generator such as Veil or Invoke-Obfuscation. <br/>
Cmd or Powershell should both work, just base64 encode your commands/obfuscation and place the payload string in: <br/>
public override bool Execute(){<br/>
&nbsp;&#09;string cmd = "&lt;PAYLOAD&gt;"<br/>
<br/>
nps_payload does have a way to specify custom payloads as well. </body></html>