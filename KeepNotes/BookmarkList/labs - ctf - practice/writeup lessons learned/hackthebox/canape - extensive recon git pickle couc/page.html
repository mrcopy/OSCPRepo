<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Canape - Extensive Recon GIT Pickle CouchDB sudo pip</title>
</head><body>Multiple methods for testing directories:<br/>
gobuster<br/>
wfuzz<br/>
<br/>
Testing comment pages: sql<br/>
Testing POST page: parameth for 'common' parameters'<br/>
<br/>
Multiple wordlists: dir list 2.3 medium did not find '.git'<br/>
<br/>
.git directory for source!<br/>
Also git.canape.htb, so sub domains!<br/>
Virtual host routing, another reason to try to send full name instead of ip address for websites<br/>
<br/>
git log to check commit histories, look for interesting things<br/>
See pickle is being used, so we can exploit that<br/>
<br/>
couchdb enumeration <br/>
curl 127.0.0.1:5984<br/>
&lt;CouchDB welcome banner&gt;<br/>
see release is 2.0.0<br/>
<br/>
API is available?<br/>
curl 127.0.0.1:5984/_all_dbs<br/>
curl 127.0.0.1:5984/_all_docs<br/>
curl 127.0.0.1:5984/simpsons<br/>
curl 127.0.0.1:5984/passwords &lt;- not authorized<br/>
<br/>
couchdb create user RCE (creates an admin user)<br/>
curl --user 'ippsec:PleaseShareTheVideo' 127.0.0.1:5984/passwords<br/>
curl --user 'ippsec:PleaseShareTheVideo' 127.0.0.1:5984/passwords/_all_docs<br/>
<br/>
sudo pip, malicious package install for root<br/>
<br/>
mkdir ippsec<br/>
cd ippsec<br/>
vi setup.py<br/>
&lt;python rev shell here&gt;<br/>
<br/>
#run sudo pip install on the current working directory. it will look for setup.py files<br/>
now sudo pip install . </body></html>